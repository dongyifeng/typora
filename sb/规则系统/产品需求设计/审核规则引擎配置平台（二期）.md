---
typora-root-url: ../../../../typora
---



[TOC]

# 一、修订记录

## 1、背景与现状

审核配置平台二期功能

## 2、需求要点&目标

- **⚠️：**文档内容仅包含二期部分，请仔细阅读！！！～～～
- 粉色为二期暂不实现的内容
- 绿色为暂不确定内容
- 蓝色为勿遗漏
- 紫色为改动点

## 3、相关系统

审核系统-规则引擎、前后端

# 二、需求描述

## 1、二期需求内容

### 1.1 平台架构

- 知识库管理-处罚动作管理菜单: 一期没做页面，二期功能补充如下方功能详情
- 知识库管理新增模版特征模块：特征管理下新增【模型特征管理】菜单，子菜单包含【模版特征列表】和【模型特征模版】

![](/images/sb/201c5af4-60b8-434a-9b49-6c3616feec1d.png)



- 流程引擎配置：
  -  规则列表: 一期没做页面，二期功能补充如下方功能详情
  -  增加菜单：策略集实力接口列表

![](/images/sb/d759d5df-90db-425e-92cb-fd7e37579e44.png)

- 引擎运行监控：增加菜单，需求延迟发布
- 数据统审：增加菜单，需求延迟发布

![](/images/sb/95c4bb75-af79-48ee-adcc-85ed188f088d.png)



### 1.2 配置内容

#### 1.2.1 一期遗留部分

- 所有一期未实现的置灰按钮都恢复为有效状态，部分接口需要检查是否有提供，后端需要提供请求机制。

#### 1.2.2 知识库管理

- 特征管理
  -  特征集管理-新增/修改弹窗，一期没做，二期补充图如下：

（以下图为准，接口去掉了版本和创建人）

![](/images/sb/69ba45bc-345f-45e0-a2dc-b0f1911b9357.png)



- 特征集管理-查看和选择：
  -  【查看】按钮与【选择】按钮合并为同一个按钮【查看/选择】，合并页面，一期做了查看，没有做选择。查看原页面去掉，整合后的页面功能如下：
  - 点击按钮进入新页面，可查看当前特征集选择状态，亦可直接在页面中进行重新选择或删除已选择特征。
  - 弹窗分为特征选择区域和已选特征查看区域，特征选择列表支持查询搜索，支持多选，选中后展示在已选特征查看区域中，而已选特征中的内容可以勾选进行批量删除。

（批量删除功能改为单独删除即可，不再需要批量实现，由于集合中单元特征不会很多，且批量删除容易出错）

- 点击确定后提交修改即可，查看时默认展示上次勾选内容在已选特征查看中。

![](/images/sb/ba8f3cd3-83c2-464b-853a-9cb97a7e1432.png)

![](/images/sb/130f4a59-d003-4e4f-b6a2-d6736d43c709.png)

​            

- 特征管理-新增特征，如下图：（普通特征的新增不会支持，会支持模型新增，模型的特征流程会单独建模块）

![](/images/sb/0048a4bc-d036-4978-9268-a747dd793de0.png)



- 策略集管理

  -  策略配置-新增策略：一期做了修改，二期补充上新增弹窗，新增时弹窗中的填充项默认都为空。

  - 处罚动作管理：处罚动作管理列表页，列表字段为【动作ID】【动作名称】【绑定策略ID】【动作场景匹配】

    【动作类型匹配】

    【动作状态】及保存和启用的按钮。

    -  绑定策略ID：点击查看关联策略，可以看到动作相关联的策略ID和策略列表，具体弹窗还是跳转到策略列表页形式都可以，弹窗比较长，最好是跳转到列表页。
    - 动作场景匹配：枚举可选，选择后点击保存才能生效。
    - 动作状态：修改了场景后点保存，保存后点击启用即可生效改动作。

  ![](/images/sb/031820b5-b60e-4f40-aedb-5606e9977680.png)





- 策略集配置-新增/编辑策略集

一期在策略集配置页面置灰的【新增/编辑策略集】按钮，恢复生效，且增加新增策略集的弹窗，如图。

-  上方区域填写策略集基本字段：【策略集版本】代入，【策略集名称】手写输入，【优先级】按123数字输入即可，【执行模式】后端枚举选择，【创建人】系统代入账号。
- 选中策略中，可上下移动策略进行优先级排列，顺序即由前端传至后端。
- 选中策略中新加一个【运行后是否退出】的下拉列表选择，每个策略旁边都带一个下拉框
- 当上面的执行模式是【串行】时，下方交互如图，需要选择运行后是否退出，以及上下移动功能
- \- 当上面的执行模式是【并行】时，选中策略无优先级和运行后是否退出功能，按钮都置灰。
- 匹配策略部分：通过【生效场景】【策略ID/名称】搜索策略，展示在策略列表，支持勾选列表内容后，同步到右侧选中策略区域，可多次搜索选中，选中策略均保持不变。

![](/images/sb/320ade6d-ca6c-4904-b776-52544f309f25.png)



#### 1.2.3 流程引擎配置

- 策略集实例接口列表
  - 改列表与一期的规则流实例接口列表页排版功能一致，操作按钮也一致，但区别为两个列表的字段略有不同。
  - 接口列表：接口code、接口名称、模式、创建人、创建时间、操作
  - 实例列表：支持多选、实例ID、策略集ID、分流比例、状态、操作，其中实例ID展示的是策略集列表，与之前一期做的规则列表不同。列表展示方式与一期一致。

![](/images/sb/15c5b0e0-1241-4092-8075-e74642a1895b.png)



- 规则列表
  - 规则列表页
    - 规则列表页面增加规则列表，支持查询功能
    - 列表字段：规则名称、特征集ID、特征集名称、特征列表、策略集实例名称、策略集名称、策略列表,其中特征列表和策略列表可点击弹窗分别展示关联的特征和策略即可。
    - 新增绑定关系按钮，点击后弹出【规则流单元配置】页

![](/images/sb/f4c24152-6732-4b64-a943-5fd467bf8654.png)



- 规则流单元配置
  - 规则名称：手写输入
  - 特征集选择，支持点击搜索或下拉搜索，支持选中，选中后下方特征集ID同步展示
  - 策略集实例选择，支持点击搜索或下拉搜索，支持选中，选中后下方特征集ID同步展示
  - 绑定关系区域：选择的特征集ID和策略集实例ID进行关联绑定，绑定关系为1个特征集+1个策略集实例，不能多重绑定，**1V1关系**。
  - 特征展示和策略展示都可以**弹窗列表**展示集合中包含的各自特征和策略内容。

![](/images/sb/dee7b570-34ac-4705-b0f3-fa76e8481efd.png)



- 规则流列表-编辑/复制规则流
  - 字段：流程名称、流程code、运行模式、流程创建、规则列表。
  - 流程名称和CODE都是系统代入，后端传
  - 运行模式：下拉列表选择
  - 流程创建：左侧的流程模块可以增加/删除，增加后为空白模块，通过右侧展示的规则列表，选择不同规则拖拽到左侧流程模块中，拖拽后的规则列表位置不为空，相当于复制。
  - 规则列表：支持分页，展示出所有规则即可

![](/images/sb/1e48a853-ae80-43d5-b10d-9850cc16d9c9.png)



- 规则流列表一期编辑和复制功能都不生效，二期生效，生效后，点击编辑/复制，展示的为上方图片页面
  - 在编辑页面编辑后提交，不影响规则流列表，不增不减。
  - 在复制页面编辑后提交，相当于新增一条规则，规则流列表为新增一行规则。



## 2、二期其他需求（后半程做）

### 2.1 模型策略迁移

模型策略部分需要迁移到规则引擎的流程中，将算法模型得出的数据按照一定匹配规则与特征和策略相匹配，从而实现在引擎中支持配置模型策略的功能。

- 知识库管理-特征管理-模型特征管理：
  - 模型特征列表（=模型特征配置tab页）
    - 列表页如下，支持特征名称和code搜索，列表字段为【特征code】【特征名称】【特征别名】【特征类型】【模版id】【常量版本号】【常量名称】【创建人】【创建时间】【备注】【操作】
    - 操作中包含【启用】和【删除】，搜索栏还有【新增】模版特征的功能，点击后弹窗新增页
    - 新增模版特征：【特征名称】【特征code】手写输入，【模版id】下拉列表选择，枚举由后端提供，【常量选择】如果需要增加常量，则点击添加常量后，弹出系统已配置的常量值，包含多个字段，字段由后端提供动态字段值，若没有则不展示。

![](/images/sb/eade9a65-72e1-4851-96b9-f360a6dbcb13.png)

![](/images/sb/b6e13c07-bea6-47ca-ae56-147ab2c86bc0.png)



模型特征模版

- 列表无操作：模版均为后端系统配置好，前端展示，不可操作
- 支持查询：模版id和名称为查询条件
- 列表字段：模版id、模版code、模版名称、模版状态、创建时间、备注
- 模版id点击后弹窗：常量内容，动态展示字段

![](/images/sb/1c25dc83-4cb4-40a0-ba39-9af8f75eba65.png)

