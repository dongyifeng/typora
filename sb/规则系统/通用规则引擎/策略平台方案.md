---
typora-root-url: ../../../../typora
---

策略平台规划图

![](/images/sb/1280X1280 (4).png)

一 前端web端配置

信息管理系统，主要是维护特征、策略、规则的关系。

当需要一个新的策略的时候，可以在该系统中进行特征、策略、规则的创建，最终生成一个code，该code为规则引擎中的某个规则流的唯一ID，当其他系统需要接入的时候，需要传入该code来确定使用何种规则。

二 后端规则引擎

- 入参：
  - 第三方系统请求策略平台，入参为code和List<Map>：code为规则流唯一ID，List<Map>为需要参与策略判断的上游特征
  - 

- 流程：
  - 根据传入的code路由到对应规则流
  - 规则流中有多个规则，串行或者并行对传入的上游特征进行策略判断
  - 单个规则中也包含多个策略集
  - 策略集中包含多个策略（策略之间可以选择AND、OR关系，并且可以串行、并行同时存在）
  - 每一个策略中包含对多个特征（上游特征、常量特征、通用特征）属性的运算、判断
  - 对于一些通用的第三方数据，通过内部的Grpc接口，直接获取，比如行情，帖子，UC等等
  - 在执行完某一个规则流之后，最终的策略判定结果会发送到大数据或者ES落表

- 返回：
  - 最终返回为List<Map>值，List中的元素个数和入参的List<Map>元素个数一致，顺序对应的也是入参的List<Map>的元素的顺序，返回的map中的字段为自定义返回字段。

