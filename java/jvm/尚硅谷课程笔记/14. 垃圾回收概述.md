---
typora-root-url: ../../../../typora
---



[TOC]

# 什么是垃圾

Java 优化掉了 C++ 的主动管理空间的问题，同时带来垃圾收集的问题。

关于垃圾收集三个经典问题：

1. 哪些内存需要回收？
2. 什么时候回收？
3. 如何回收？



垃圾收集机制是 Java 的招牌能力，<font color=green>极大地提高了开发效率。</font> 

<img src="/images/java/WX20221228-104021@2x.png" width="460" style="zoom:50%;" >



什么是垃圾（Garbage）呢？

垃圾是指在<font color=red>运行程序中没有任何指针指向的对象（引用类型）。</font>这个对象就是需要被回收的垃圾。

基础类型数据是标量，不需要被回收。



如果不及时对内存中的垃圾进行清理，那么，这些垃圾对象所占的内存空间会一直保留到应用程序结束，被保留的空间无法被其他对象使用。甚至可能导致内存溢出。



# 为什么需要GC

 世间万物循环的规律：成、住、坏、空。内存中对象也一样，一个对象创建，就应该有一个退出机制，才能为后来者让路。



如果不进行垃圾回收，内存迟早都会被消耗完。JVM 将整理出来的内存分配给新的对象。没有 GC 就不能保证应用程序的正常运行。



# Java 垃圾回收机制



Java 垃圾回收机制好处：

1. 自动内存管理，无需开发人员动手参与内存的分配与回收，这样<font color=red>降低内存泄漏和内存溢出的风险</font>。
   1. 没有垃圾回收器，java 也会和 cpp 一样，各种悬垂指针、野指针、泄漏问题让你头疼不已。
2. 自动内存管理机制，将程序员从繁重的内存管理中释放出来，可以<font color=red>更专注业务开发。</font>



Java 垃圾回收机制带来的问题：

1. 对于 Java 开发人员，自动内存管理就像一个黑匣子。会<font color=orange>弱化 Java 开发人员在程序出现内存溢出时定位问题和解决问题的能力。</font>



为了解决上述问题

1. 需要了解 JVM 的自动内存配合和回收的原理，我们才能在遇见 OutOfMemoryError 时，快速根据错误日志定位问题和解决问题。
2. 当需要排查各种内存溢出、内存泄漏问题时，当垃圾收集成为系统达到更高并发量的瓶颈时，我们就必须对这些“自动化”的技术<font color=orange>实施必要的监控和调节。</font>