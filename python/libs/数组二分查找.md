# 基础操作

寻找插入点

```python
import bisect

a = [1, 3, 5, 5, 7]
# 在 a 中找到 x 适合的插入点，如果 a 已存在，插入点是已存在元素之前
index = bisect.bisect_left(a, 2)
# 1
index2 = bisect.bisect_left(a, 4)
# 2
index3 = bisect.bisect_left(a, 5)
# 2

# # 在 a 中找到 x 适合的插入点，如果 a 已存在，插入点是已存在元素之后
index4 = bisect.bisect_right(a, 5)
# 4

# bisect = bisect_right
```



插入

```python
import bisect

a = [1, 3, 5, 5, 7]

# 将 2 插入 a，如果 2 已存在，插入在已存在元素之前
bisect.insort_left(a, 2)
# [1, 2, 3, 5, 5, 7]

bisect.insort_left(a, 5)
# [1, 2, 3, 5, 5, 5, 7]

# 将 5 插入 a，如果 5 已存在，插入在已存在元素之前
bisect.insort_right(a, 5)
# [1, 2, 3, 5, 5, 5, 5, 7]

# insort = insort_right
bisect.insort(a, 2)
```



# 应用

## 搜索有序列表



```python
def index(a, x):
    'Locate the leftmost value exactly equal to x'
    i = bisect_left(a, x)
    if i != len(a) and a[i] == x:
        return i
    raise ValueError

def find_lt(a, x):
    'Find rightmost value less than x'
    i = bisect_left(a, x)
    if i:
        return a[i-1]
    raise ValueError

def find_le(a, x):
    'Find rightmost value less than or equal to x'
    i = bisect_right(a, x)
    if i:
        return a[i-1]
    raise ValueError

def find_gt(a, x):
    'Find leftmost value greater than x'
    i = bisect_right(a, x)
    if i != len(a):
        return a[i]
    raise ValueError

def find_ge(a, x):
    'Find leftmost item greater than or equal to x'
    i = bisect_left(a, x)
    if i != len(a):
        return a[i]
    raise ValueError
```



## 数字查询

将学生考试的分数，转化为 A、B、C

[0,60 ) 是 F

[60,70 ) 是 D

[70,80 ) 是 C

[80,90 ) 是 B

[90,100 ] 是 A

```python
def grade(score, breakpoints=[60, 70, 80, 90], grades='FDCBA'):
    i = bisect.bisect(breakpoints, score)
    return grades[i]
  
[grade(score) for score in [33, 99, 77, 70, 89, 90, 100]]
# ['F', 'A', 'C', 'C', 'B', 'A', 'A']
```

