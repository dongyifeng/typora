---
typora-root-url: ../../../../typora
---

模型特征一体化开发思路

## 一、设计目标

- 一体化的模型算法接口接入
- 便捷的特征接入, 统一灵活的出入参定制能力



## 二、设计要求

### 2.1   统一的模型算法接口

- 定制模型算法接口模版

在接入算法模型接口时对接口进行分类.不同类型的接口定制不同的模板,当算法提供统一的模型入口时.不同特征可共用一套模板.

- 变量与常量支持：

模型的输入参数来自前置特征输出.在定制模板时规划好所需入参(变量),另外在系统层面支持外部常量,在提供灵活性方面作为补充.

### 2.2   精细化系统配置与最小化运营配置

- 依据模板同类型的特征接入和创建时,系统层面会批量将所有关联配置自动生成,包括特征,模型特征,特征与特征项关联关系以及常量的初始化和加载.
- 策略平台上单独开放出一块模型管理能力,模型特征的管控有别于普通特征,提供必填参数模型名称和常量配置.

1 模型名称用于对接模型接口,从模型算法服务那获取,后续的交互都会依赖此参数.

2 常量是用于模型特征无法从流程上下文获取数据场景.

3 模型特征与运行方式与普通定制的特征无差异.

4 模型特征的策略配置方式与普通特征无差异

特征执行器会依据上面配置,从流程上下文和常量池(系统有常量配置功能,并有自动生效的能力)加载数据,归纳总结是最下程度的运营人员干预配置.整个模型特征的执行和交互过程如下图



![](/images/sb/b5e53e47-16fa-4b16-8a60-f9af0a0ba816.png)

### 2.3   支持在线测试和验证

模型接入后需要进行在线测试和验证,为此设计有虚拟的运行环境(暂定为虚拟环境),此环境与生产的流程是隔离的.构建好的虚拟环境接收到验证请求时自动构建当前模型所需的流程节点,默认情况下会将用户信息,帖子信息加载进来,当模版关联了其他特征会在运行时自动加载.鉴于目前常用的只有帖子,虚拟环境的输入变量只有帖子id,其他变量会在特征工厂中自行获取.



### 2.4 注意事项

特征在使用过程中有状态校验(2 已发布,1 待发布 0 停用),为避免配置或运行异常需要了解特征的发布流程

1 当特征在任何场景都未使用方可停用

2 只有已发布的特征才能用于流程配置

3 新建的模型特征仅仅为待发布状态时,在虚拟环境内确认完成后方可发布