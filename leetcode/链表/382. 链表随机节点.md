# 链表随机节点

给定一个单链表，随机选择链表的一个节点，并返回相应的节点值。保证每个节点被选的概率一样。

**进阶:**
如果链表十分大且长度未知，如何解决这个问题？你能否使用常数级空间复杂度实现？

**示例:**

```pyhton
// 初始化一个单链表 [1,2,3].
ListNode head = new ListNode(1);
head.next = new ListNode(2);
head.next.next = new ListNode(3);
Solution solution = new Solution(head);

// getRandom()方法应随机返回1,2,3中的一个，保证每个元素被返回的概率相等。
solution.getRandom();
```

**思路：random**

1. 借助系统 random 模块，实现等概率
2. 计算出链表长度，随机出一个下标
3. 访问下标


```python
import random

def get_len(head):
    if not head: return 0
    res = 0
    node = head
    while node:
        res += 1
        node = node.next
    return res

def get_random(head):
    length = get_len(head)
    index = random.randint(0, length - 1)
    i = 0
    node = head
    while i < index and node:
        i += 1
        node = node.next
        if i == index: return node
    return node

l1 = ListNode(1)
l1.next = ListNode(2)
l1.next.next = ListNode(3)
l1.next.next.next = ListNode(4)
l1.next.next.next.next = ListNode(5)

res = [0] * 6
for i in range(100):
    index = get_random(l1).val
    res[index] += 1
print([num/100.0 for num in res])
```



## 蓄水池抽样算法