

- [x] 基金模型更新:https://jira.snowballfinance.com/browse/XUEQIU-7212

  - [x] 上线新模型
  - [x] 离线打分验证模型
  - [x] 配置实验，切流上线

  

- [x] search-rank，search-nlp，knowing-query 接入 ELK :https://jira.snowballfinance.com/browse/XUEQIU-7143

  - [x] 修改并上线日志格式
  - [x] 向 SRE 提工单接入ELK

  

- [x] knowing-query 与线上效果对比

  - [ ] redis 缓存优化：二级缓存
  - [x] 准备对比数据
  - [x] 结果对比
  - [ ] 书写文档

  

- [x] 排查线上综合搜索页：基金模块、相关基金模块，某些场景搜索无结果:https://jira.snowballfinance.com/browse/XUEQIU-7406

  - [x] 符合预期：由于业务迭代过程中，衔接问题，一些召回逻辑从基金模块迁移至相关基金模块。相关基金模块和基金模块互斥出现，添加黑白名单，导致一些召回策略被过滤掉。
  - [x] 处理方式：暂不处理，等待相关基金模块的召回逻辑迁移到知识图谱。

  

- [x] 优化 Trie 树的统计

  - [x] 新增树的高的统计和最大子节点的统计。
  - [x] 处理 search-index 212.83 redis 超时问题
    - [x] 处理方法：SRE 迁移到其他物理机



- [x] Search-index 优化 SQL:https://jira.snowballfinance.com/browse/XUEQIU-7362

  - [x] 初步定了技术方案：为基金用户建立新表。

  ```sql
  @Select("select * from t_search_sugg where state=0 and  `type`=2 and fund_ext like '%count%'") List<SearchSuggEntity> queryAllFundUser();  
  ```





user_pagerank

mark_gegu_enter



```mysql
select
  (ceil (((similarity * 100) / 10) -1)) * 10 as min_value,
  (ceil ((similarity * 100) / 10)) * 10 as max_value,
  count(1)
from
  test_compare
where
  trace_id = 1550423617106825216
group by
  ceil((similarity * 100) / 10)
  
  
  
  select
  (ceil ((intersection * 100) / 10)) * 10 as intersection,
  count(1)
from
  test_compare
where
  trace_id = 1550423617106825216
group by
  ceil((intersection * 100) / 10)
```

