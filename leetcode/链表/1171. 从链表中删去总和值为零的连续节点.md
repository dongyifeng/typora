# 从链表中删去总和值为零的连续节点

> 给你一个链表的头节点 head，请你编写代码，反复删去链表中由 总和 值为 0 的连续节点组成的序列，直到不存在这样的序列为止。
>
> 删除完毕后，请你返回最终结果链表的头节点。
>
> 
>
> 你可以返回任何满足题目要求的答案。

**示例 1：**

```python
输入：head = [1,2,-3,3,1]
输出：[3,1]
提示：答案 [1,2,1] 也是正确的。
```



**示例 2：**

```python
输入：head = [1,2,3,-3,4]
输出：[1,2,4]
```



**示例 3：**

```python
输入：head = [1,2,3,-3,-2]
输出：[1]
```

**思路：前缀和**

1. 求出前缀和，对于前缀和相同的项，相同项中间的结点（数据）都可以删除。

比如：

数组：[1, 2, 3, -3, 4] 

前缀和：[1, 3, 6, 3, 7]

两个 3  中间的结点（数据）需要删除。

换成链表其实也是一样的思路，把第一个 3 的 next 指向第二个 3 的 next 即可

```python
class ListNode:
    def __init__(self, val=0, next=None):
        self.val = val
        self.next = next


def foreach_list_node(head):
    node = head
    while node:
        print(node.val, "->"),
        node = node.next
    print("")

def remove_zero_sum_sublists(head):
    if not head or not head.next: return head
    # 因为头结点也有可能会被消掉，所以这里加一个虚拟节点作为头结点
    dumpy = ListNode(0)
    dumpy.next = head
    p = dumpy

    prefix_sum = {}
    s = 0
    while p:
        s += p.val
        if s in prefix_sum:
            prefix_sum[s].next = p.next
        else:
            prefix_sum[s] = p
        p = p.next
    return dumpy.next


l1 = ListNode(1)
l1.next = ListNode(2)
l1.next.next = ListNode(-3)
l1.next.next.next = ListNode(3)
l1.next.next.next.next = ListNode(1)

foreach_list_node(remove_zero_sum_sublists(l1))
```

