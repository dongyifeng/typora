# 最大正方形

>在一个由 `'0'` 和 `'1'` 组成的二维矩阵内，找到只包含 `'1'` 的最大正方形，并返回其面积。

**示例 1：**

![](images/max1grid.jpeg)

```python
输入：matrix = [["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],["1","0","0","1","0"]]
输出：4
```



**示例 2：**

![](images/max2grid.jpeg)

```python
输入：matrix = [["0","1"],["1","0"]]
输出：1
```



**示例 3：**

```python
输入：matrix = [["0"]]
输出：0
```



**思路：动态规划**

状态转移方程：$f(i,j)=min(f(i-1,j),f(i,j-1),f(i-1,j-1))+1$

![](images/221_fig1.png)

```python
def maximal_square(matrix):
    row_count = len(matrix)
    column_count = len(matrix[0])
    res = [[int(matrix[i][j]) for j in range(column_count)] for i in range(row_count)]
    res.insert(0, [0] * column_count)
    for row in res:
        row.insert(0, 0)

    result = 0
    for i in range(1, row_count + 1):
        for j in range(1, column_count + 1):
            if matrix[i - 1][j - 1] == "1":
                res[i][j] = min(res[i - 1][j], res[i][j - 1], res[i - 1][j - 1]) + 1
                result = max(result, res[i][j])

    return result * result
 

 matrix = [["1", "0", "1", "0", "0"],
          ["1", "0", "1", "1", "1"],
          ["1", "1", "1", "1", "1"],
          ["1", "0", "0", "0", "0"], ]
print(maximal_square(matrix))

matrix = [["1", "1", "1", "1", "1"],
          ["1", "1", "1", "1", "1"],
          ["0", "0", "0", "0", "0"],
          ["1", "1", "1", "1", "1"],
          ["1", "1", "1", "1", "1"]]
print(maximal_square(matrix))

matrix = [["1"], ["0"], ["1"], ["1"], ["1"], ["1"], ["0"]]
print(maximal_square(matrix))

matrix = [["1"]]
print(maximal_square(matrix))
```





**思路：动态数组**



```python
def maximal_square2(matrix):
    row_count = len(matrix)
    column_count = len(matrix[0])
    array = [0] * (column_count + 1)

    result = 0
    for i in range(1, row_count + 1):
        left = 0
        left_top = 0
        for j in range(1, column_count + 1):
            if matrix[i - 1][j - 1] == "1":
                tmp = min(array[j], left_top, left) + 1
                left_top = array[j]
                array[j] = left = tmp
            else:
                left_top = array[j]
                array[j] = left = 0
            result = max(result, tmp)
        print(i, array, left, left_top)

    return result * result
```

