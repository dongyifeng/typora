#### 插入缓冲

​	提高了非聚簇索引写的速度

> ​	应用在非聚簇索引中，因为非聚簇索引插入的离散型，所以非聚簇索引的插入效率低，为了解决这个问题，InnoDB设计出了插入缓冲技术，对于非聚集类索引的插入和更新操作，不是每一次都直接插入到索引页中，如果该索引页在缓冲池中，直接插入；否则，先将其放入插入缓冲区中，再以一定的频率和索引页合并，这时，就可以将同一个索引页中的多个插入合并到一个IO操作中，大大提高写性能。

​	应用场景：

​    1、索引不能是唯一的（没办法做唯一性的校验）

​    2、可能导致宕机恢复时间变长

​    3、写过多或大量占用缓冲池

#### 二次写

​	提高了可靠性（部分页失效），牺牲了一点点的性能

>  Innodb的Page Size一般是16KB，其数据校验也是针对这16KB来计算的，将数据写入到磁盘是以Page为单位进行操作的。我们知道，由于文件系统对一次大数据页大多数情况下不是原子操作，这意味着如果服务器宕机了，可能只做了部分写入。因为redo log是针对页的逻辑操作，因为页的数据问题，导致不能进行恢复。
>
> 脏页进行刷新的时候，并不直接写磁盘，而是会通过将脏页先复制到内存中的二次写的缓冲中，之后通过二次写的缓冲再分两次、每次1MB顺序写入共享表空间的物理磁盘上。然后同步脏页进磁盘上。
>
> [mysql的两次写 - 简书 (jianshu.com)](https://www.jianshu.com/p/7d87e2603cdd)
>
> [InnoDB引擎中的redo为何不能处理页断裂的问题？ - 知乎 (zhihu.com)](https://www.zhihu.com/question/298242864/answer/2422704045)

​    ![0](./img/innodb1.png)

#### 自适应hash

  Innodb存储引擎会监控对表上二级索引的查找，如果发现某二级索引被频繁访问，二级索引成为热数据，建立哈希索引可以带来速度的提升。

  1、不能有范围查询

  2、没有最左，必须覆盖